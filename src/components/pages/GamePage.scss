@import '../../config.scss';

$background-bar: linear-gradient(
    to right,
    transparent 0%,
    transparent 50%,
    $background-main 50%,
    $background-main 100%
  ),
  linear-gradient(
    to bottom,
    transparent 0%,
    transparent calc(50% - 1.5px),
    $color-main calc(50% - 1.5px),
    $color-main calc(50% + 1.5px),
    transparent calc(50% + 1.5px),
    transparent 100%
  );

@keyframes mini-bar-circuit {
  from {
    transform: rotate(-90deg);
    background: $background-bar;
  }
  to {
    transform: rotate(270deg);
    background: $background-bar;
  }
}

// Displays Mission Map only
.GamePage {
  $page-vertical-padding: 35px;
  $page-horizontal-padding: 30px;
  $page-width: calc(100vw - #{$page-horizontal-padding * 2});
  $page-height: calc(100vh - #{$page-vertical-padding * 2});
  $page-row-1-height: 85px;
  $page-row-2-height: calc(#{$page-height} - #{$page-row-1-height});
  $resource-n-action-height: 55px;
  $map-n-output-height: calc(
    #{$page-row-2-height} - #{$resource-n-action-height}
  );
  $node-action-width: 400px;

  overflow-x: hidden;
  overflow-y: hidden;
  display: grid;
  width: $page-width;
  height: $page-height;
  grid-template-columns: $page-width;
  grid-template-rows: $page-row-1-height $page-row-2-height;
  margin: 0 auto;
  padding: $page-vertical-padding $page-horizontal-padding;

  .Navigation {
    grid-template-columns: auto 220px 130px;
  }

  .Content {
    $content-row-1-height: 53px;

    display: grid;
    grid-template-rows: $content-row-1-height auto;
    width: 100%;
    height: $page-row-2-height;

    .ResourceAndActionContainer {
      display: flex;
      justify-content: flex-start;
      align-items: center;
      flex-flow: row wrap;
      width: 100%;
      height: $resource-n-action-height;
      margin: 0;

      .Resources {
        display: flex;
        justify-content: flex-start;
        align-items: center;
        width: calc(100% - 167px);
        margin: 0 0 20px;
        font-size: 1em;

        &.RedAlert {
          color: $terminal-red;
        }
      }

      .ActionsContainer {
        display: none;
      }
    }

    .MissionMap {
      margin-right: 10px;
      width: 100%;
      height: $map-n-output-height;
    }

    .OutputPanel {
      height: $map-n-output-height;
    }

    .NodeActions {
      position: absolute;
      top: calc(
        125px + #{$page-vertical-padding + $page-row-1-height +
          $content-row-1-height}
      );
      left: calc(50vw - #{$node-action-width / 2});
      width: $node-action-width;
      max-height: 38vh;

      @media only screen and (max-height: 585px) {
        top: calc(
          10px + #{$page-vertical-padding + $page-row-1-height +
            $content-row-1-height}
        );
      }

      @media only screen and (max-width: 670px) {
        left: 25vw;
        width: 50vw;
      }
    }

    .ExecuteNodePath {
      position: absolute;
      top: calc(
        125px + #{$page-vertical-padding + $page-row-1-height +
          $content-row-1-height}
      );
      left: calc(50vw - #{$node-action-width / 2});
      width: $node-action-width;
      max-height: 50vh;

      @media only screen and (max-height: 670px) {
        top: calc(
          10px + #{$page-vertical-padding + $page-row-1-height +
            $content-row-1-height}
        );
      }

      @media only screen and (max-width: 670px) {
        left: 25vw;
        width: 50vw;
      }
    }
  }

  @media only screen and (max-width: 768px) {
    padding: 10px;
  }

  &.DisplayMapOnly {
    .NodeActions {
      display: none;

      @media only screen and (max-height: 585px) and (max-width: 670px) {
        display: none;
      }
    }

    .ExecuteNodePath {
      display: none;

      @media only screen and (max-height: 670px) and (max-width: 670px) {
        display: none;
      }
    }

    .OutputPanel {
      display: none;
    }

    .ActionPropertyDisplay {
      display: none;
    }
  }

  // Displays the Mission Map and Output Panel only
  &.DisplayOutputPanel {
    .Content {
      grid-template-columns: 65% 35%;

      .ResourceAndActionContainer {
        grid-column: 1 / 3;
      }

      .MissionMap {
        width: 100%;
      }

      .NodeActions {
        display: none;

        @media only screen and (max-height: 585px) and (max-width: 670px) {
          display: none;
        }
      }

      .ExecuteNodePath {
        display: none;

        @media only screen and (max-height: 670px) and (max-width: 670px) {
          display: none;
        }
      }

      .ActionPropertyDisplay {
        display: none;
      }
    }
  }

  // Displays the Mission Map, Output Panel, and Node Action Window
  &.DisplayOutputAndActionPrompt {
    .Content {
      grid-template-columns: 65% 35%;

      .ResourceAndActionContainer {
        grid-column: 1 / 3;
      }

      .MissionMap {
        width: 100%;
      }

      .NodeActions {
        left: calc(
          calc(calc(100vw - #{$page-horizontal-padding * 2}) * 0.325) + #{$page-horizontal-padding} -
            #{$node-action-width / 2}
        );

        @media only screen and (max-width: 670px) {
          left: 25vw;
          width: 50vw;
        }
      }

      .ExecuteNodePath {
        display: none;

        @media only screen and (max-height: 670px) and (max-width: 670px) {
          display: none;
        }
      }

      .ActionPropertyDisplay {
        display: none;
      }
    }
  }

  // Displays the Mission Map, Output Panel, and Execution Path Prompt
  &.DisplayOutputPanelAndPathPrompt {
    .Content {
      grid-template-columns: 65% 35%;

      .ResourceAndActionContainer {
        grid-column: 1 / 3;
      }

      .MissionMap {
        width: 100%;
      }

      .NodeActions {
        display: none;

        @media only screen and (max-height: 585px) and (max-width: 670px) {
          display: none;
        }
      }

      .ExecuteNodePath {
        left: calc(
          calc(calc(100vw - #{$page-horizontal-padding * 2}) * 0.325) + #{$page-horizontal-padding} -
            #{$node-action-width / 2}
        );

        @media only screen and (max-width: 670px) {
          left: 25vw;
          width: 50vw;
        }
      }
    }
  }

  &.DisplayPathPrompt {
    .Content {
      .OutputPanel {
        display: none;
      }

      .NodeActions {
        display: none;

        @media only screen and (max-height: 585px) and (max-width: 670px) {
          display: none;
        }
      }
    }
  }

  &.DisplayActionPrompt {
    .Content {
      .OutputPanel {
        display: none;
      }

      .ExecuteNodePath {
        display: none;

        @media only screen and (max-height: 670px) and (max-width: 670px) {
          display: none;
        }
      }
    }
  }
}

// This changes the layout of the navigation bar based on the if the
// user is an instructor or not
.GamePage {
  .Content {
    .ResourceAndActionContainer {
      .ActionsContainer {
        &.show {
          display: flex;
          justify-content: flex-end;
          align-items: center;
          width: fit-content;

          .remove,
          .copy,
          .edit,
          .Toggle {
            &.remove:hover,
            &.copy:hover,
            &.edit:hover {
              filter: invert(68%) sepia(94%) saturate(322%) hue-rotate(117deg)
                brightness(200%) contrast(98%);
            }
          }

          .edit {
            background: url('../../assets/images/icons/edit.svg');
            background-size: 65% 65%;
            background-position: center;
            background-repeat: no-repeat;
            width: 1em;
            height: 1em;
            border: none;
          }

          .remove {
            background: url('../../assets/images/icons/remove.svg');
            background-size: 65% 65%;
            background-position: center;
            background-repeat: no-repeat;
            width: 1em;
            height: 1em;
            border: none;
          }

          .copy {
            background: url('../../assets/images/icons/copy.svg');
            background-size: 65% 65%;
            background-position: center;
            background-repeat: no-repeat;
            width: 1em;
            height: 1em;
            border: none;
          }

          .Toggle {
            margin-left: 5px;
            background-color: #1a2a1a;

            &.Activated {
              border-color: $terminal;
              .Switch {
                background-color: $terminal;
              }
            }

            .Switch {
              background-color: white;
            }

            &.Activated:hover {
              border-color: $terminal;
              .Switch {
                background-color: $terminal;
              }
            }
            &.Locked:hover {
              cursor: pointer;
            }
          }
        }
      }
    }
  }
}
